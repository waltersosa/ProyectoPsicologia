<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reconocimiento de emociones b√°sicas</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Reconocimiento de emociones b√°sicas</h1>
  <div class="instrucciones" id="instrucciones">Haz que los cuadrados coincidan con el estado de la imagen de referencia.</div>
  <div class="referencia" id="referencia"></div>
  <div class="cuadrados-container">
    <div class="cuadrado" id="cuadrado1"></div>
    <div class="cuadrado" id="cuadrado2"></div>
    <div class="cuadrado" id="cuadrado3"></div>
    <div class="cuadrado" id="cuadrado4"></div>
  </div>
  <div class="mensaje-final" id="mensajeFinal"></div>

  <script>
    // Estados posibles y explicaciones
    const estados = [
      { nombre: "Feliz", instruccion: "La felicidad es una emoci√≥n de alegr√≠a y bienestar." },
      { nombre: "Triste", instruccion: "La tristeza aparece cuando algo nos duele emocionalmente." },
      { nombre: "Enojado", instruccion: "El enojo surge cuando percibimos una injusticia o frustraci√≥n." },
      { nombre: "Asustado", instruccion: "El miedo nos alerta sobre un posible peligro." },
      { nombre: "Desagrado", instruccion: "El asco ocurre cuando algo nos resulta desagradable." },
      { nombre: "Confundido", instruccion: "La confusi√≥n aparece cuando no entendemos algo completamente." }
    ];

    // Imagen de referencia seg√∫n estado
    const imagenReferencia = estado => `images/${estado}.jpeg`;

    // Imagen para cada cuadrado seg√∫n estado y n√∫mero
    const imagenCuadrado = (estado, cuadrado) => `images/${estado[0]}${cuadrado}.jpeg`;

    let estadoReferencia = 0; // Estado actual de la imagen de referencia
    const referencia = document.getElementById("referencia");
    const instrucciones = document.getElementById("instrucciones");
    const cuadrados = [
      document.getElementById("cuadrado1"),
      document.getElementById("cuadrado2"),
      document.getElementById("cuadrado3"),
      document.getElementById("cuadrado4")
    ];
    const mensajeFinal = document.getElementById("mensajeFinal");

    // Inicializar estados de los cuadrados con estados diferentes
    referencia.style.backgroundImage = `url('${imagenReferencia(estados[estadoReferencia].nombre)}')`;
    instrucciones.textContent = estados[estadoReferencia].instruccion;

    cuadrados.forEach((cuadrado, index) => {
      cuadrado.dataset.estado = index; // Cada cuadrado comienza con un estado diferente
      cuadrado.style.backgroundImage = `url('${imagenCuadrado(estados[index].nombre, index + 1)}')`;

      // Cambiar estado del cuadrado al hacer clic
      cuadrado.addEventListener("click", () => {
        let nuevoEstado = (parseInt(cuadrado.dataset.estado) + 1) % estados.length;
        cuadrado.dataset.estado = nuevoEstado;
        cuadrado.style.backgroundImage = `url('${imagenCuadrado(estados[nuevoEstado].nombre, index + 1)}')`;
        verificarEstados();
      });
    });

    // Verificar si todos los cuadrados coinciden con el estado de referencia
    function verificarEstados() {
      const todosCoinciden = cuadrados.every(
        cuadrado => estados[cuadrado.dataset.estado].nombre === estados[estadoReferencia].nombre
      );

      if (todosCoinciden) {
        estadoReferencia++;
        if (estadoReferencia < estados.length) {
          // Cambiar imagen de referencia e instrucci√≥n
          referencia.style.backgroundImage = `url('${imagenReferencia(estados[estadoReferencia].nombre)}')`;
          instrucciones.textContent = estados[estadoReferencia].instruccion;

          // Desordenar las im√°genes de los cuadrados
          desordenarCuadrados();
        } else {
          // Juego terminado
          mensajeFinal.textContent = "¬°Juego terminado! üéâ";
          instrucciones.textContent = "";
        }
      }
    }

    // Desordenar las im√°genes de los cuadrados
    function desordenarCuadrados() {
      cuadrados.forEach((cuadrado, index) => {
        const nuevoEstado = Math.floor(Math.random() * estados.length);
        cuadrado.dataset.estado = nuevoEstado;
        cuadrado.style.backgroundImage = `url('${imagenCuadrado(estados[nuevoEstado].nombre, index + 1)}')`;
      });
    }
  </script>
</body>
</html>
